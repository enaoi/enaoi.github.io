<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件 | enaoi&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="vue、react、webpack...，everything about front development.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.13931c1a.css" as="style"><link rel="preload" href="/assets/js/app.8a6f8a64.js" as="script"><link rel="preload" href="/assets/js/2.842e7985.js" as="script"><link rel="preload" href="/assets/js/37.ba196ca1.js" as="script"><link rel="prefetch" href="/assets/js/10.cdb683af.js"><link rel="prefetch" href="/assets/js/11.320018ad.js"><link rel="prefetch" href="/assets/js/12.1575a701.js"><link rel="prefetch" href="/assets/js/13.d710e265.js"><link rel="prefetch" href="/assets/js/14.5a9138af.js"><link rel="prefetch" href="/assets/js/15.ad37ab1d.js"><link rel="prefetch" href="/assets/js/16.a7543076.js"><link rel="prefetch" href="/assets/js/17.55938c7a.js"><link rel="prefetch" href="/assets/js/18.b267eae3.js"><link rel="prefetch" href="/assets/js/19.e7ee1e66.js"><link rel="prefetch" href="/assets/js/20.869f7f33.js"><link rel="prefetch" href="/assets/js/21.189e2b24.js"><link rel="prefetch" href="/assets/js/22.4bf5bbb5.js"><link rel="prefetch" href="/assets/js/23.460d48ca.js"><link rel="prefetch" href="/assets/js/24.3bc81cd6.js"><link rel="prefetch" href="/assets/js/25.2b74f289.js"><link rel="prefetch" href="/assets/js/26.ad5a6f1e.js"><link rel="prefetch" href="/assets/js/27.060760e2.js"><link rel="prefetch" href="/assets/js/28.b8e2c39d.js"><link rel="prefetch" href="/assets/js/29.41256001.js"><link rel="prefetch" href="/assets/js/3.446337b8.js"><link rel="prefetch" href="/assets/js/30.f5cd6965.js"><link rel="prefetch" href="/assets/js/31.5febacb9.js"><link rel="prefetch" href="/assets/js/32.ed0a19fa.js"><link rel="prefetch" href="/assets/js/33.67be766e.js"><link rel="prefetch" href="/assets/js/34.2920acfb.js"><link rel="prefetch" href="/assets/js/35.3cb84bf2.js"><link rel="prefetch" href="/assets/js/36.6cf685fd.js"><link rel="prefetch" href="/assets/js/38.b3487aa2.js"><link rel="prefetch" href="/assets/js/39.8059deed.js"><link rel="prefetch" href="/assets/js/4.f5601869.js"><link rel="prefetch" href="/assets/js/40.84387762.js"><link rel="prefetch" href="/assets/js/41.e1739030.js"><link rel="prefetch" href="/assets/js/42.ecf48b28.js"><link rel="prefetch" href="/assets/js/43.dc47cb80.js"><link rel="prefetch" href="/assets/js/44.ca1f2934.js"><link rel="prefetch" href="/assets/js/45.ef1585b2.js"><link rel="prefetch" href="/assets/js/46.f4704de7.js"><link rel="prefetch" href="/assets/js/47.a5aa7a82.js"><link rel="prefetch" href="/assets/js/48.2f596373.js"><link rel="prefetch" href="/assets/js/49.2649e461.js"><link rel="prefetch" href="/assets/js/5.e8366d7d.js"><link rel="prefetch" href="/assets/js/50.f6e56838.js"><link rel="prefetch" href="/assets/js/51.443b2b38.js"><link rel="prefetch" href="/assets/js/52.76e8279f.js"><link rel="prefetch" href="/assets/js/53.766085c5.js"><link rel="prefetch" href="/assets/js/54.762d576d.js"><link rel="prefetch" href="/assets/js/55.a0bacbad.js"><link rel="prefetch" href="/assets/js/56.88b21fa9.js"><link rel="prefetch" href="/assets/js/57.edb3c596.js"><link rel="prefetch" href="/assets/js/58.83426543.js"><link rel="prefetch" href="/assets/js/59.e6b35962.js"><link rel="prefetch" href="/assets/js/6.f6480706.js"><link rel="prefetch" href="/assets/js/60.42418b0a.js"><link rel="prefetch" href="/assets/js/61.986a3c55.js"><link rel="prefetch" href="/assets/js/62.dc61b062.js"><link rel="prefetch" href="/assets/js/63.7270a456.js"><link rel="prefetch" href="/assets/js/64.7f8fdce9.js"><link rel="prefetch" href="/assets/js/65.35c2a749.js"><link rel="prefetch" href="/assets/js/66.265df582.js"><link rel="prefetch" href="/assets/js/67.30c535e8.js"><link rel="prefetch" href="/assets/js/68.eb5cc45e.js"><link rel="prefetch" href="/assets/js/69.38f41b07.js"><link rel="prefetch" href="/assets/js/7.7d7d0d81.js"><link rel="prefetch" href="/assets/js/70.3a9646e8.js"><link rel="prefetch" href="/assets/js/71.fd691e65.js"><link rel="prefetch" href="/assets/js/72.779f8e2d.js"><link rel="prefetch" href="/assets/js/73.b98034f7.js"><link rel="prefetch" href="/assets/js/74.dc317e9a.js"><link rel="prefetch" href="/assets/js/75.2da86225.js"><link rel="prefetch" href="/assets/js/76.12d74630.js"><link rel="prefetch" href="/assets/js/77.0748e04e.js"><link rel="prefetch" href="/assets/js/78.2a0a7e5d.js"><link rel="prefetch" href="/assets/js/79.5d39e898.js"><link rel="prefetch" href="/assets/js/8.b0447022.js"><link rel="prefetch" href="/assets/js/80.02d143a0.js"><link rel="prefetch" href="/assets/js/81.b3890429.js"><link rel="prefetch" href="/assets/js/82.3d1e0f8a.js"><link rel="prefetch" href="/assets/js/83.0c806b49.js"><link rel="prefetch" href="/assets/js/84.b7e2ccc2.js"><link rel="prefetch" href="/assets/js/85.979cbad2.js"><link rel="prefetch" href="/assets/js/86.81e560c6.js"><link rel="prefetch" href="/assets/js/9.68721d1e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.13931c1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">enaoi's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link router-link-active">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/libs/" class="nav-link">
  库
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/datastructures/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MVVM框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/angular/" class="nav-link">
  angular
</a></li></ul></li><li class="dropdown-item"><h4>
          Node
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-subitem"><a href="/express.html" class="nav-link">
  express
</a></li></ul></li><li class="dropdown-item"><h4>
          打包
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/vite/" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/" class="nav-link">
  技术类
</a></li><li class="dropdown-item"><!----> <a href="/reading/" class="nav-link">
  文学类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/vscode/" class="nav-link">
  vscode
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/computer/" class="nav-link">
  计算机
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/enaoi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link router-link-active">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/libs/" class="nav-link">
  库
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/datastructures/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MVVM框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-subitem"><a href="/angular/" class="nav-link">
  angular
</a></li></ul></li><li class="dropdown-item"><h4>
          Node
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-subitem"><a href="/express.html" class="nav-link">
  express
</a></li></ul></li><li class="dropdown-item"><h4>
          打包
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/vite/" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/" class="nav-link">
  技术类
</a></li><li class="dropdown-item"><!----> <a href="/reading/" class="nav-link">
  文学类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/vscode/" class="nav-link">
  vscode
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/computer/" class="nav-link">
  计算机
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/enaoi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/javascript/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/javascript/Class.html" class="sidebar-link">Class 类</a></li><li><a href="/javascript/Intersection_Obserber_Api.html" class="sidebar-link">Intersection Obserber API</a></li><li><a href="/javascript/basic_1_basicDataType.html" class="sidebar-link">基础数据类型</a></li><li><a href="/javascript/basic_2_this.html" class="sidebar-link">this</a></li><li><a href="/javascript/browser_1_staticResourceUpdate.html" class="sidebar-link">静态资源版本更新与缓存</a></li><li><a href="/javascript/browser_2_event.html" aria-current="page" class="active sidebar-link">事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#事件流" class="sidebar-link">事件流</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#事件处理程序" class="sidebar-link">事件处理程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#html内联事件处理" class="sidebar-link">HTML内联事件处理</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#dom0级事件处理程序" class="sidebar-link">DOM0级事件处理程序</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#dom2级事件处理机制" class="sidebar-link">DOM2级事件处理机制</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#ie事件处理程序" class="sidebar-link">IE事件处理程序</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#跨浏览器的事件处理程序" class="sidebar-link">跨浏览器的事件处理程序</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#事件对象" class="sidebar-link">事件对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#ie中的事件对象" class="sidebar-link">IE中的事件对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#事件类型" class="sidebar-link">事件类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#ui事件" class="sidebar-link">UI事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#焦点事件" class="sidebar-link">焦点事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#鼠标事件" class="sidebar-link">鼠标事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#滚轮事件" class="sidebar-link">滚轮事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#文本事件" class="sidebar-link">文本事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#键盘事件" class="sidebar-link">键盘事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#复合事件" class="sidebar-link">复合事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#变动事件：dom发生变化" class="sidebar-link">变动事件：DOM发生变化</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#html5事件" class="sidebar-link">HTML5事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#设备事件" class="sidebar-link">设备事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#触摸事件" class="sidebar-link">触摸事件</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#手势事件" class="sidebar-link">手势事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#内存和性能优化" class="sidebar-link">内存和性能优化</a></li><li class="sidebar-sub-header"><a href="/javascript/browser_2_event.html#模拟事件" class="sidebar-link">模拟事件</a></li></ul></li><li><a href="/javascript/browser_3_javascriptLoad.html" class="sidebar-link">网页解析和脚本执行时间线</a></li><li><a href="/javascript/browser_4_render.html" class="sidebar-link">页面加载过程</a></li><li><a href="/javascript/browser_5_url_render.html" class="sidebar-link">浏览器处理URL请求过程</a></li><li><a href="/javascript/browser_6_javascript_render.html" class="sidebar-link">同步、异步和延迟脚本</a></li><li><a href="/javascript/browser_7_performance.html" class="sidebar-link">performance</a></li><li><a href="/javascript/browser_8_size.html" class="sidebar-link">窗口、显示器、文档大小</a></li><li><a href="/javascript/business_number.html" class="sidebar-link">数字处理</a></li><li><a href="/javascript/console.html" class="sidebar-link">Console</a></li><li><a href="/javascript/module.html" class="sidebar-link">Node.js 如何处理 ES6 模块</a></li><li><a href="/javascript/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/javascript/regex_practice.html" class="sidebar-link">正则练习</a></li><li><a href="/javascript/regex_regExp.html" class="sidebar-link">RegExp对象</a></li><li><a href="/javascript/window_navigation.html" class="sidebar-link">浏览器会话</a></li><li><a href="/javascript/window_requestAnimationFrame.html" class="sidebar-link">window.requestAnimationFrame</a></li><li><a href="/javascript/window_requestIdleCallback.html" class="sidebar-link">window.requestIdleCallback()</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h1> <h2 id="事件流"><a href="#事件流" class="header-anchor">#</a> 事件流</h2> <p><strong>事件流</strong>：从页面中接收事件的顺序。</p> <ol><li><p><strong>事件冒泡（event bubbling）</strong>：事件开始时由最具体的元素（文档中嵌套层次最深的那个节点）接收，然后逐级向上传播到较为不具体的节点（文档）。</p></li> <li><p><strong>事件捕获（event capturing）</strong>:不太具体的节点应该更早接收到事件，最具体的节点应该最后接收到事件。</p></li> <li><p><strong>事件流的三个阶段</strong>：事件捕获阶段、处于目标阶段、事件冒泡阶段</p></li></ol> <h2 id="事件处理程序"><a href="#事件处理程序" class="header-anchor">#</a> 事件处理程序</h2> <h3 id="html内联事件处理"><a href="#html内联事件处理" class="header-anchor">#</a> HTML内联事件处理</h3> <p>通过HTML元素的特性指定</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>click me<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onlick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>eventHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>缺点</strong>：</p> <ol><li>HTMl和JavaScript紧密耦合，不建议采用。</li> <li>存在时差问题。用户在事件处理程序被解析之前就触发了程序。</li> <li>扩展事件处理程序的作用域链在不同的浏览器中会导致不同结果。</li></ol> <h3 id="dom0级事件处理程序"><a href="#dom0级事件处理程序" class="header-anchor">#</a> DOM0级事件处理程序</h3> <p>通过 JavaScript 指定事件处理程序的传统方式，就是将一个函数赋值给一个事件处理程序属性。属性通常全部小写，例如 onclick。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加事件处理程序</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//删除事件处理程序</span>
btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>事件作用域</strong>：元素的方法。因此，事件处理程序是在元素的作用域中运行；程序中的 this 引用当前元素。</p> <p><strong>缺点</strong>：一个事件只能有一个事件处理程序。多个会被覆盖。</p> <h3 id="dom2级事件处理机制"><a href="#dom2级事件处理机制" class="header-anchor">#</a> DOM2级事件处理机制</h3> <p>“DOM2 级事件” 定义了两个方法：</p> <p><strong>绑定事件：</strong><code>addEventListener()</code> <strong>删除事件：</strong><code>removeEventListener()</code></p> <p>所有 DOM 节点中都包含这两个方法，接受3个参数:</p> <ol><li>要处理的事件名（不带on）</li> <li>事件处理程序的函数</li> <li>一个布尔值:
<ul><li>true:表示在捕获阶段调用事件处理</li> <li>false:表示在冒泡阶段调用</li></ul></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 为一个按钮添加了 onclick 事件处理程序，而且该事件会在冒泡阶段被触发</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这个匿名函数处理事件，无法被移除，只能是定义的 eventHadnler</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>事件作用域</strong>：添加的事件处理程序也是在其依附的元素的作用域中运行。</li> <li><strong>优点</strong>：可以添加多个事件处理程序，按照添加它们的顺序触发。</li></ul> <p>大多数情况下，采用事件流的冒泡阶段，这样可以最大限度地兼容各种浏览器。</p> <h3 id="ie事件处理程序"><a href="#ie事件处理程序" class="header-anchor">#</a> IE事件处理程序</h3> <p>IE 实现了与 DOM 中类似的两个方法：<code>attachEvent()</code>、<code>detachEvent()</code></p> <p>IE8以及更低版本中需要用到他们。与 <code>addEventListener</code>不同的是，事件名包含前缀 <code>on</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onlick'</span><span class="token punctuation">,</span>eventHanlder<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意：</strong></p> <ol><li><code>attachEvent</code> 事件处理程序会在全局作用域中运行，因此 <code>this === window</code>。</li> <li>可以添加多个事件处理程序，但事件执行顺序和添加顺序相反！</li> <li>同样匿名函数不可以被移除。</li></ol> <h3 id="跨浏览器的事件处理程序"><a href="#跨浏览器的事件处理程序" class="header-anchor">#</a> 跨浏览器的事件处理程序</h3> <p>兼容各大浏览器差异的事件处理方法包括addHandler()和removeHandler()，都属于EvenUtil对象，接收相同的参数：要操作的元素、事件名称、事件处理程序函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">addHandler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>type<span class="token punctuation">,</span>handler</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//DOM2级处理</span>
                    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//IE8以下方法</span>
                    element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>  <span class="token comment">// DOM0方法，一般不会走到这里</span>
                    element<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">]</span><span class="token operator">=</span>handler<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">removeHandler</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>type<span class="token punctuation">,</span>handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    element<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    element<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>使用方法如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myBtn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span><span class="token string">'click'</span><span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        EventUtil<span class="token punctuation">.</span><span class="token function">removeHandler</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span><span class="token string">'click'</span><span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h2> <p>触发DOM事件，会产生一个event对象。这个对象里包含了所有与事件有关的信息。该事件对象的常用接口和属性如下：</p> <ol><li><code>cancelable</code>/<code>preventDefault()</code>
cancelable 为 true 时，可以通过 preventDefault() 取消其默认行为。</li> <li><code>bubbles</code>/<code>stopPropagation()</code>
bubbles 为true 时可以取消事件的进一步捕获和冒泡。同时阻止任何事件被调用。DOM3事件新增。</li> <li><code>type</code>
多个事件使用同一个handler时可以通过type来区别。</li> <li><code>target</code>
事件的目标DOM。</li> <li>位置信息
<ul><li>客户端位置: clientX,clientY。</li> <li>页面位置：pageX,pageY。页面会有滚动。</li> <li>屏幕位置：screenX,screenY。 浏览器会缩放。全屏下和client的差距在浏览器导航和所有部分的高度差。</li></ul></li> <li><code>relatedTarget</code> <ul><li>mouse事件中，比如 mouseover 中的主目标是移入的元素。离开的元素就是 relatedTaget。</li></ul></li> <li><code>button</code> <ul><li>mousedown 事件中，button的数字代表了是否是鼠标按钮，以及具体哪个鼠标按钮或组合触发的</li></ul></li></ol> <h3 id="ie中的事件对象"><a href="#ie中的事件对象" class="header-anchor">#</a> IE中的事件对象</h3> <p>IE中的事件对象有些不同。</p> <ul><li>低版本IE中，事件 handler 内使用 <code>window.event</code> 来获取 event 对象。</li> <li><code>returnValue</code>：设置为false，就等同于 <code>preventDefault()</code></li> <li><code>cancelBubble</code>：设置为false，就等同于 <code>stopPropagation()</code></li> <li><code>srcElement</code>：同于 <code>target</code></li></ul> <h2 id="事件类型"><a href="#事件类型" class="header-anchor">#</a> 事件类型</h2> <h3 id="ui事件"><a href="#ui事件" class="header-anchor">#</a> UI事件</h3> <ol><li><p>load</p> <ul><li>页面加载完毕后 window 上触发</li> <li>图片加载完毕后 <code>&lt;img&gt;</code> 元素上触发</li> <li>嵌入内容加载完毕后 <code>&lt;object&gt;</code> 上触发</li></ul></li> <li><p>unload</p> <ul><li>页面卸载后 window 上触发</li> <li>利用该事件清除事件引用，以免内存泄漏。
<strong>unload阶段文档会处于一个特定状态：</strong> <ol><li>所有资源仍存在 (图片, iframe 等.)</li> <li>对于终端用户所有资源均不可见</li> <li>界面交互无效 (window.open, alert, confirm 等)</li> <li>错误不会停止卸载文档的过程</li> <li>如果发送异步请求，页面 <code>unload</code> 会导致异步请求触发 <code>abort</code>事件。</li> <li>发送同步请求，虽然有效，但用户需要等待请求结束才可以关闭页面，用户体验不好。</li></ol></li></ul> <p><em><strong>请注意:</strong></em> <u>unload事件也遵循文档树:父iframe会在子iframe卸载前卸载.</u></p></li> <li><p>abort</p></li> <li><p>error</p> <ul><li>页面加载错误时 window 上触发</li> <li>无法加载图片时 <code>&lt;img&gt;</code> 上触发</li> <li>无法加载嵌入内容时 <code>&lt;object&gt;</code> 上触发</li></ul></li> <li><p>select</p></li> <li><p>resize</p></li> <li><p>scroll</p></li> <li><p>visibilitychange
标签页被隐藏或显示的时候会触发。
<code>document.visibilityState</code>属性可以返回当前标签页是显示还是隐藏。</p></li></ol> <h3 id="焦点事件"><a href="#焦点事件" class="header-anchor">#</a> 焦点事件</h3> <ol><li>blur</li> <li>focus</li> <li>focusin：和focus等价，但支持冒泡</li> <li>focusout: 和blur等价，但支持冒泡</li></ol> <h3 id="鼠标事件"><a href="#鼠标事件" class="header-anchor">#</a> 鼠标事件</h3> <ol><li>click</li> <li>dbclick</li> <li>mousedown</li> <li>mouseenter/mouseleave
外部进入/移出范围内。范围内的所有子元素的进入/移出不会再触发。</li> <li>mousemove: 元素内部移动，多次触发。</li> <li>mouseover/mouseout
外部进入/移出边界,元素内部子元素的进入和移出会再次触发。</li> <li>mouseup</li></ol> <h3 id="滚轮事件"><a href="#滚轮事件" class="header-anchor">#</a> 滚轮事件</h3> <ol><li>mousewheel
<ul><li>wheelData: 120的倍数。向上为+120，向下为-120.</li> <li>detail： firefox中支持detail属性，显示滚动的值和方向。向上为-3，向下为+3；</li></ul></li></ol> <h3 id="文本事件"><a href="#文本事件" class="header-anchor">#</a> 文本事件</h3> <ol><li>textInput
<ul><li>可编辑区域才能触发该事件。</li> <li>输入的数据可以通过 <code>data</code> 属性获取。</li> <li><code>inputMethod</code> 文本输入的方式。键盘输入、粘贴、拖拽等。</li></ul></li></ol> <h3 id="键盘事件"><a href="#键盘事件" class="header-anchor">#</a> 键盘事件</h3> <ol><li>keydown</li> <li>keypress</li> <li>keyup</li></ol> <p>文本框输入事件的 event 对象中包含 <code>keyCode</code> 信息。显示事件触发的具体键。但IE和Safari返回的是键码。firefox和Opera中返回是的ASCII码。</p> <p>跨浏览器可以使用 <code>charCode</code> 属性获取键盘字符对应的ASCII码。配合 <code>String.fromCharCode()</code> 转化为实际字符。</p> <h3 id="复合事件"><a href="#复合事件" class="header-anchor">#</a> 复合事件</h3> <p>输入编辑器打字过程中，通过拉丁字母输入，得到最终文字的过程。</p> <ol><li>compositionstart</li> <li>compositionupdate</li> <li>compositionend</li></ol> <p>vue 中 <code>v-model</code> 监控 input 输入变化，打字输入中文的过程可能不需要显示字母输入的变化。此时就可以监听是否是composition事件触发过程中来避免不必要的渲染更新。</p> <h3 id="变动事件：dom发生变化"><a href="#变动事件：dom发生变化" class="header-anchor">#</a> 变动事件：DOM发生变化</h3> <ol><li>DOMNodeRemoved</li> <li>DOMNodeInserted</li> <li>DOMSubtreeModified</li></ol> <h3 id="html5事件"><a href="#html5事件" class="header-anchor">#</a> HTML5事件</h3> <ol><li><p>contextmenu：右键菜单事件</p></li> <li><p>beforeunload
如果处理函数将Event对象的returnValue属性赋值非空字符串，浏览器会弹出一个对话框，来询问用户是否确定要离开当前页面。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window，document 及其资源即将被卸载。'</span><span class="token punctuation">)</span>

    <span class="token comment">// Cancel the event as stated by the standard.</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Chrome requires returnValue to be set.</span>
    event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>DOMContentLoaded</p> <ul><li>dom解析完成后就触发。</li> <li>load 需要等到所有资源加载完成后再触发。</li></ul></li> <li><p>readystatechange
文档加载过程中各个阶段的记录。包含几个过程</p> <ul><li>uninttialized</li> <li>loading</li> <li>loaded</li> <li>interactive</li> <li>complete</li></ul></li> <li><p>pageshow/pagehide：(这包括了后退/前进按钮操作，同时也会在onload 事件触发后初始化页面时触发)</p> <ul><li>重新加载的页面。pageshow在load后触发。</li> <li>缓存的页面，只触发pageshow</li> <li>这两个事件的对象是document。但必须添加到window</li> <li>event对象中的 <code>persisted</code> 属性判断是否保存在bfcache中。
⚠️注意和 <code>visibilitychange</code> 区分。</li></ul></li> <li><p>hashchange
网站浏览器 url 的hash值发生变化,相关的参数：</p> <ul><li>oldURL</li> <li>newURL</li> <li>location.hash</li></ul></li></ol> <h3 id="设备事件"><a href="#设备事件" class="header-anchor">#</a> 设备事件</h3> <ol><li>orientationchange
<ul><li>window.orientation</li></ul></li> <li>deviceorientation
<ul><li>alpha: 围绕z轴旋转角度</li> <li>beta: 围绕x轴旋转角度</li> <li>gamma: 围绕y轴旋转角度</li> <li>absolute: 设备是否返回绝对值</li> <li>compassCalibrated: 设备的指南针是否校准</li></ul></li> <li>devicemotion:设备的移动</li></ol> <h3 id="触摸事件"><a href="#触摸事件" class="header-anchor">#</a> 触摸事件</h3> <ol><li>touchstart</li> <li>touchmove</li> <li>touchend</li> <li>touchcancel</li></ol> <p>触摸事件的属性：</p> <ul><li>event.touches: touch对象的数组</li> <li>event.touchTouchs</li> <li>event.changeTouches</li></ul> <h3 id="手势事件"><a href="#手势事件" class="header-anchor">#</a> 手势事件</h3> <ol><li>gesturestart: 一个手指已经按在屏幕上，另一个手指又触摸屏幕时触发</li> <li>gesturechange: 屏幕上任何一个手指移动</li> <li>gestureend: 任何一个手指从屏幕上移动</li></ol> <h2 id="内存和性能优化"><a href="#内存和性能优化" class="header-anchor">#</a> 内存和性能优化</h2> <p><strong>事件委托</strong>：在DOM层级更高里监听一个类型事件，将底层多个监听事件合并为一个，占用内存更少。</p> <p><strong>移除事件处理程序</strong>：删除DOM结构前，应该先将绑定的事件删除。否则垃圾回收机制可能不能正确将空元素事件引用删除。</p> <h2 id="模拟事件"><a href="#模拟事件" class="header-anchor">#</a> 模拟事件</h2> <ol><li><p>DOM中的事件拟用</p> <ul><li><code>document.createEvent(eventname)</code> 创建事件对象</li> <li><code>event.initMouseEvent(...)</code> 初始化事件对象</li> <li><code>$dom.dispatchEvent(event)</code> 触发事件</li></ul></li> <li><p>键盘拟用</p> <ul><li><code>initKeyEvent()</code></li></ul></li> <li><p>其它</p> <ul><li><code>initMutationEvent()</code></li></ul></li> <li><p>自定义事件</p> <ul><li><code>initCustomEvent(type, bubbles, cancelable, detail)</code></li></ul></li> <li><p>IE 中的事件模拟</p> <ul><li>在IE中创建事件：<code>document.createEventObject()</code></li> <li>触发事件：<code>$dom.fireEvent(type, event)</code></li></ul></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">9/2/2020, 11:50:43 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript/browser_1_staticResourceUpdate.html" class="prev">
        静态资源版本更新与缓存
      </a></span> <span class="next"><a href="/javascript/browser_3_javascriptLoad.html">
        网页解析和脚本执行时间线
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8a6f8a64.js" defer></script><script src="/assets/js/2.842e7985.js" defer></script><script src="/assets/js/37.ba196ca1.js" defer></script>
  </body>
</html>
