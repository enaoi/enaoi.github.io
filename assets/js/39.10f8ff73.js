(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{398:function(t,a,s){"use strict";s.r(a);var n=s(25),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"performance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[t._v("#")]),t._v(" performance")]),t._v(" "),s("p",[t._v("传统计算一个页面加载时间：页面第一个 script 被执行至整个页面加载完成的时间。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    function onLoad() {\n      var now = new Date().getTime();\n      var latency = now - start;\n      console.log(")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("page loading time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("latency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" ms`"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onload")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onLoad()"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Main page body goes from here. --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("缺点：")]),t._v(" "),s("ol",[s("li",[t._v("只能计算script执行到页面完全加载的时间，无法统计页面从服务器端请求的时间。")]),t._v(" "),s("li",[t._v("Date 对象返回的是 ms，无法获得更高精度")])]),t._v(" "),s("h2",{attrs:{id:"navigation-timing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#navigation-timing"}},[t._v("#")]),t._v(" navigation timing")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://w3c.github.io/navigation-timing/#sec-navigation-timing",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C navigation timing 接口定义"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("收集 HTML 文档加载过程中的各类数据")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v(" showNavigationDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navigation'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("table")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onload")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("showNavigationDetails()"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("navigation timing详细过程如下：\n"),s("img",{attrs:{src:"evernotecid://500C1910-0299-4C7B-B6B6-34FA452313A8/appyinxiangcom/10638591/ENResource/p648",alt:"97737ce9f10d79f8acaa6b1f0c1fe552.jpeg"}})]),t._v(" "),s("h2",{attrs:{id:"resource-timing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resource-timing"}},[t._v("#")]),t._v(" resource timing")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://w3c.github.io/resource-timing/#sec-resource-timing",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C resource timing 接口定义"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("文档中各类资源加载的时间： style sheets、javascript、images...")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get resource timing entries")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resourceList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resource'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("资源加载 process 图：\n"),s("img",{attrs:{src:"en-resource://database/3017:1",alt:"89d7ca3baf7c4406e7c91bcdccb755a6.svg+xml"}})]),t._v(" "),s("h2",{attrs:{id:"常用计算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用计算"}},[t._v("#")]),t._v(" 常用计算")]),t._v(" "),s("h3",{attrs:{id:"网络请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络请求"}},[t._v("#")]),t._v(" 网络请求")]),t._v(" "),s("p",[t._v("google chrome 中一个请求的 timing 时间图\n"),s("img",{attrs:{src:"evernotecid://500C1910-0299-4C7B-B6B6-34FA452313A8/appyinxiangcom/10638591/ENResource/p651",alt:"dbead964e2ebd1aabc44a397bd481026.jpeg"}})]),t._v(" "),s("h4",{attrs:{id:"dns查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns查询"}},[t._v("#")]),t._v(" DNS查询")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("domainLookupStart")])]),t._v(" "),s("li",[s("code",[t._v("domainLookupEnd")]),t._v("\n当用户请求一个 URL 时， DNS（Domain Name System）需要将 domain 转化为对应的 IP 地址。DNS的查询时间受到各种因素的影响，尤其是 DMS 缓存。Navigation 和 Resource Timing 都包含这类属性。")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dnsTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupStart\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("但 "),s("code",[t._v("domainLookupEnd")]),t._v(" 和 "),s("code",[t._v("domainLookupStart")]),t._v("  可能都是 "),s("code",[t._v("0")]),t._v("。比如一个资源是第三方提供的，且第三方主机没有设置 "),s("code",[t._v("Timing-Allow-Origin")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"连接协商"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连接协商"}},[t._v("#")]),t._v(" 连接协商")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("connectStart")]),t._v("：客户端向服务端打开连接")]),t._v(" "),s("li",[s("code",[t._v("secureConnectionStart")]),t._v("：TLS协商，可能值为 "),s("code",[t._v("0")])]),t._v(" "),s("li",[s("code",[t._v("connectEnd")]),t._v("：协商结束\nTLS 协商的结束时间和 "),s("code",[t._v("connectEnd")]),t._v(" 相同")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Quantifying total connection time")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pageNav "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"navigation"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" connectionTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pageNav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" pageNav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" tlsTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- Assume 0 by default")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Did any TLS stuff happen?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pageNav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secureConnectionStart "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Awesome! Calculate it!  ")]),t._v("\n  tlsTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pageNav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" pageNav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secureConnectionStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h4",{attrs:{id:"请求和响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求和响应"}},[t._v("#")]),t._v(" 请求和响应")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fetchStart")]),t._v("：当浏览器开始请求资源时标记，浏览器开始检查缓存（HTTP和service worker 缓存）")]),t._v(" "),s("li",[s("code",[t._v("workerStart")]),t._v("：当从 "),s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/primers/service-workers",target:"_blank",rel:"noopener noreferrer"}},[t._v("service worker"),s("OutboundLink")],1),t._v(" 接收到 fetch 事件返回。")]),t._v(" "),s("li",[s("code",[t._v("requestStart")])]),t._v(" "),s("li",[s("code",[t._v("responseStart")]),t._v("：响应的第一个字节到达时间")]),t._v(" "),s("li",[s("code",[t._v("responseEnd")]),t._v("：响应的最后一个字节到达时间")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fetchTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" workerTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("workerStart "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  workerTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("workerStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有请求时间 (抛出 unload, redirects, DNS, and connection 时间)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseStart "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 响应时间 (download)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" responseTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Request + response")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestResponseTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h4",{attrs:{id:"重定向"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[t._v("#")]),t._v(" 重定向")]),t._v(" "),s("p",[t._v("不常遇到")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" redirectTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirectEnd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirectStart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"文档处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档处理"}},[t._v("#")]),t._v(" 文档处理")]),t._v(" "),s("p",[t._v("当文档下载结束后，浏览器解析文件需要花费一些时间。但这个时间通常不重要，除非文件过大。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("domInteractive")])]),t._v(" "),s("li",[s("code",[t._v("domContentLoadedEventStart")])]),t._v(" "),s("li",[s("code",[t._v("domContentLoadedEventEnd")])]),t._v(" "),s("li",[s("code",[t._v("domComplete")])])]),t._v(" "),s("h4",{attrs:{id:"loading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading"}},[t._v("#")]),t._v(" loading")]),t._v(" "),s("p",[t._v("当文档和资源完全结束加载，浏览器就会执行 "),s("code",[t._v("load")]),t._v("  事件。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("domEventStart")])]),t._v(" "),s("li",[s("code",[t._v("domEventEnd")])]),t._v(" "),s("li",[s("code",[t._v("duration")]),t._v(" 属性")])]),t._v(" "),s("h4",{attrs:{id:"文件和资源大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件和资源大小"}},[t._v("#")]),t._v(" 文件和资源大小")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("transferSize")]),t._v("：资源的总体大小，包括 HTTP 头部。但有的值为 "),s("code",[t._v("0")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("encodedBodySize")]),t._v("：压缩后的文件大小，不包括 HTTP 头部。")]),t._v(" "),s("li",[s("code",[t._v("decodedBodySize")]),t._v("：解压缩之后的文件大小，不包括 HTTP 头部。")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resource")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transferSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encodedBodySize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compressionRatio "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decodedBodySize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encodedBodySize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它")]),t._v(" "),s("h4",{attrs:{id:"peformance-memory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#peformance-memory"}},[t._v("#")]),t._v(" peformance.memory")]),t._v(" "),s("p",[t._v("非标准接口，只有chrome 包含。返回的属性值皆为字节单位。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参考值（单位byte）")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("jsHeapSizeLimit")]),t._v(" "),s("td",[t._v("2190000000 （2.04G）")]),t._v(" "),s("td",[t._v("内存大小限制")])]),t._v(" "),s("tr",[s("td",[t._v("totalJSHeapSize")]),t._v(" "),s("td",[t._v("10000000（9.54M）")]),t._v(" "),s("td",[t._v("可使用内存")])]),t._v(" "),s("tr",[s("td",[t._v("usedJSHeapSize")]),t._v(" "),s("td",[t._v("10000000（9.54M）")]),t._v(" "),s("td",[t._v("已经使用内存")])])])]),t._v(" "),s("h4",{attrs:{id:"performance-navigation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-navigation"}},[t._v("#")]),t._v(" performance.navigation")]),t._v(" "),s("blockquote",[s("p",[t._v("用户是如何到达这个页面的?")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参考值")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("redirectCount")]),t._v(" "),s("td",[t._v("0")]),t._v(" "),s("td",[t._v("页面通过几次重定向跳转来")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("通过何种方式进入页面，枚举类型"),s("code",[t._v("[ 0, 1, 2, 255 ]")])])])])]),t._v(" "),s("p",[t._v("其中type为枚举类型")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("数值")]),t._v(" "),s("th",[t._v("NavigationType")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("0")]),t._v(" "),s("td",[t._v('"navigate"')]),t._v(" "),s("td",[t._v("TYPE_NAVIGATE：当前页面是通过点击链接，书签和表单提交，或者脚本操作，或者在url中直接输入地址")])]),t._v(" "),s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v('"reload"')]),t._v(" "),s("td",[t._v("TYPE_RELOAD：点击刷新页面按钮或者通过"),s("code",[t._v("Location.reload()")]),t._v("方法显示的页面")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v('"back_forward"')]),t._v(" "),s("td",[t._v("TYPE_BACK_FORWARD: 页面通过历史记录和前进后退访问时")])]),t._v(" "),s("tr",[s("td",[t._v("255")]),t._v(" "),s("td",[t._v('"prerender"')]),t._v(" "),s("td",[t._v("TYPE_RESERVED：其他")])])])]),t._v(" "),s("h4",{attrs:{id:"performance-timing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-timing"}},[t._v("#")]),t._v(" performance.timing")]),t._v(" "),s("blockquote",[s("p",[t._v("导航和页面加载事件的数据")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://w3c.github.io/navigation-timing/#the-performancetiming-interface",target:"_blank",rel:"noopener noreferrer"}},[t._v("performanceTiming 接口"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"evernotecid://500C1910-0299-4C7B-B6B6-34FA452313A8/appyinxiangcom/10638591/ENResource/p650",alt:"7e63b0174961f257d375e7f12ca790fe.png"}})]),t._v(" "),s("h4",{attrs:{id:"performance-now"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-now"}},[t._v("#")]),t._v(" performance.now()")]),t._v(" "),s("p",[t._v("返回相对 "),s("code",[t._v("performance.timing.navigationStart")]),t._v(" 的时间， 微秒（百万分之一秒）为单位，更加精准。\n相对于 Date.now() 的优点：")]),t._v(" "),s("ul",[s("li",[t._v("自身不会阻塞和影响页面")]),t._v(" "),s("li",[t._v("Date 是不精确的")]),t._v(" "),s("li",[t._v("不会受到系统程序执行阻塞的影响")]),t._v(" "),s("li",[t._v("不受系统时间的影响，认为修改或程序调整系统时间对它无影响")]),t._v(" "),s("li",[t._v("Date无法计算页面加载前的延迟时间")])]),t._v(" "),s("h4",{attrs:{id:"performance-mark-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-mark-name"}},[t._v("#")]),t._v(" performance.mark(name)")]),t._v(" "),s("p",[t._v("标记点打点的一个操作")]),t._v(" "),s("h4",{attrs:{id:"performance-measure-name-startmarkname-endmarkname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-measure-name-startmarkname-endmarkname"}},[t._v("#")]),t._v(" performance.measure(name, startMarkName, endMarkName)")]),t._v(" "),s("p",[t._v("计算两个标记点之间的时间差值")]),t._v(" "),s("h4",{attrs:{id:"performance-getentriesbytype-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-getentriesbytype-type"}},[t._v("#")]),t._v(" performance.getEntriesByType(type)")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navigation'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resourceList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resource'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" markList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mark'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" measureList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'measure'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h4",{attrs:{id:"performance-getentriesbyname-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-getentriesbyname-name"}},[t._v("#")]),t._v(" performance.getEntriesByName(name,"),s("type",[t._v(")")])],1),t._v(" "),s("ol",[s("li",[t._v("自定义的 mark、measure 的name")]),t._v(" "),s("li",[t._v("resourceTiming 中的 name")]),t._v(" "),s("li",[t._v("当mark 和measure重名的时候，可以用type来进行区分，否则返回所有。")]),t._v(" "),s("li",[t._v("名称不存在，返回空数组")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" heroImageTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://somesite.com/images/hero-image.jpg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"performance-observer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-observer"}},[t._v("#")]),t._v(" Performance Observer")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developers.google.com/web/updates/2016/06/performance-observer",target:"_blank",rel:"noopener noreferrer"}},[t._v("developer google"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"特殊情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特殊情况"}},[t._v("#")]),t._v(" 特殊情况")]),t._v(" "),s("h4",{attrs:{id:"跨域和-timing-allow-origin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域和-timing-allow-origin"}},[t._v("#")]),t._v(" 跨域和 "),s("code",[t._v("Timing-Allow-Origin")])]),t._v(" "),s("p",[t._v("如果"),s("code",[t._v("Timing-Allow-Origin")]),t._v(" 头部未设置的跨域请求，performance timing是无法统计到的。")]),t._v(" "),s("h4",{attrs:{id:"http-持久连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-持久连接"}},[t._v("#")]),t._v(" HTTP 持久连接")]),t._v(" "),s("p",[t._v("http1 头部设置 "),s("code",[t._v("Connection: Keep-Alive")]),t._v(" 。这些都会影响 timing。")]),t._v(" "),s("h2",{attrs:{id:"参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://w3c.github.io/navigation-timing/#introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("w3c - navigation-timing"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/navigation-and-resource-timing",target:"_blank",rel:"noopener noreferrer"}},[t._v("developers.google.com-navigation-and-resource-timing"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/webperformance/basics/",target:"_blank",rel:"noopener noreferrer"}},[t._v("measuring  page load speed with navigation timing"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);