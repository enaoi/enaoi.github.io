---
title: ç±»åž‹æ£€æµ‹å’ŒåŽŸç†
date: 2019-11-29 15:05:45
categories:
- javascript
tags:
- javascript
- javascript_basic
---
è¯¦ç»†è¯´æ˜ŽåŽŸå§‹ç±»åž‹ã€å¼•ç”¨ç±»åž‹(æ•°ç»„)ï¼Œä»¥åŠå¯¹è±¡å±žæ€§çš„æ£€æµ‹æ–¹æ³•åŠåŽŸç†ã€‚

## ç±»åž‹æ£€æµ‹

### 1. typeof â€” æ£€æµ‹åŽŸå§‹å€¼

| typeof ç±»åž‹               | è¿”å›žå€¼      | typeof ç±»åž‹         | è¿”å›žå€¼   |
| ------------------------- | ----------- | ------------------- | -------- |
| typeof "my name is fiona" | "string"    | typeof {}           | "object" |
| typeof true               | "boolean"   | typeof []           | "object" |
| typeof 1                  | "number"    | typeof new Date()   | "object" |
| typeof undefined          | "undefined" | typeof null         | "object" |
| typeof NaN                | "number"    | typeof new RegExp() | "object" |
| typeof function(){}       | ðŸŽˆ"function" | typeof Symbol()     | "symbol" |

ðŸ‘ å°†å…¶ç”¨äºŽä¸€ä¸ªæœªå£°æ˜Žçš„å˜é‡ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚(æœªå®šä¹‰çš„å˜é‡å’Œå€¼ä¸º undefined çš„å˜é‡é€šè¿‡ typeof éƒ½å°†è¿”å›ž undefined ã€‚)

ðŸ› `typeof null`  è¿”å›ž"object",åŽ†å²bugã€‚

### 2. instanceof â€” æ£€æµ‹å¼•ç”¨å€¼

é™¤äº†åŽŸå§‹å€¼ä»¥å¤–ï¼Œéƒ½æ˜¯å¼•ç”¨å€¼ã€‚typeofåœ¨åˆ¤æ–­è¿™äº›å¼•ç”¨ç±»åž‹çš„æ—¶å€™ï¼Œè¿”å›žçš„éƒ½æ˜¯â€œobjectâ€ã€‚

instanceof ä¸ä»…æ£€æµ‹æž„é€ è¿™ä¸ªå¯¹è±¡çš„æž„é€ å™¨ï¼Œè¿˜æ£€æµ‹åŽŸåž‹é“¾ã€‚åŽŸåž‹é“¾åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬å®šä¹‰å¯¹è±¡æ‰€é‡‡ç”¨çš„ç»§æ‰¿æ¨¡å¼, å› æ­¤éƒ½ç»§æ‰¿è‡ª Objectã€‚

```javascript
//æ£€æµ‹æ—¥æœŸ
var now = new Date();

console.log(now instanceof Date);   //true
console.log(now instanceof Object); //true

```

ðŸ‘ javaScriptä¸­æ£€æµ‹è‡ªå®šä¹‰ç±»åž‹æœ€å¥½çš„åšæ³•å°±æ˜¯ä½¿ç”¨ instanceof è¿ç®—ç¬¦ï¼Œè¿™ä¹Ÿæ˜¯å”¯ä¸€çš„æ–¹æ³•ã€‚

ðŸ’£ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ç»§æ‰¿è‡ªObjectã€‚`value instanceof Object` éƒ½ä¸ºtrueã€‚

### 3. Object.proptotype.toString.call(value)

Array.isArrayçš„è¡¥ä¸ç‰ˆæœ¬ðŸ‘‡

```javascript
function isArray(value) {
  if (typeof Array.isArray === 'function') {
    return Array.isArray(value)
  } else {
    return Object.prototype.toString.call(value) === '[object Array]'
  }
}
```

å…¶å®ƒç±»åž‹çš„æ£€æµ‹

```javascript
Object.prototype.toString.call(1) // "[object Number]"
Object.prototype.toString.call('hi') // "[object String]"
Object.prototype.toString.call({a:'hi'}) // "[object Object]"
Object.prototype.toString.call([1,'a']) // "[object Array]"
Object.prototype.toString.call(true) // "[object Boolean]"
Object.prototype.toString.call(() => {}) // "[object Function]"
Object.prototype.toString.call(null) // "[object Null]"
Object.prototype.toString.call(undefined) // "[object Undefined]"
Object.prototype.toString.call(Symbol(1)) // "[object Symbol]"
```

### 4. in â€” å±žæ€§æ˜¯å¦å­˜åœ¨

åˆ¤æ–­å±žæ€§å­˜åœ¨çš„æ–¹æ³•ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨inè¿ç®—ç¬¦ï¼š

```javascript
var object = {
    count: 0,
    related: null
}

//good
if("count" in object){ //è¿™é‡Œçš„ä»£ç ä¼šæ‰§è¡Œ }
if("related" in object){ //...}
//bad
if(object["count"]){ //è¿™é‡Œçš„ä»£ç ä¸ä¼šæ‰§è¡Œ }
if(object["related"] != null){//...}
```

ðŸ‘  in è¿ç®—ç¬¦å¯ä»¥è§£å†³ï¼Œé€šè¿‡`.`æˆ–`[]` è¿ç®—ç¬¦èŽ·å–å€¼å¹¶åˆ¤æ–­ï¼Œå½“å±žæ€§å€¼ä¸ºå‡å€¼çš„æ—¶å€™ï¼Œä¼šå‡ºçŽ°é”™è¯¯çš„é—®é¢˜ã€‚å¦‚ï¼š0ï¼Œfalseï¼Œ""ï¼Œ nullï¼Œundefinedã€‚

ðŸ’£ `in` è¿ç®—ç¬¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå®ƒä¸èƒ½è¯†åˆ«å“ªäº›å±žæ€§æ˜¯å¯¹è±¡è‡ªèº«çš„ï¼Œå“ªäº›å±žæ€§æ˜¯ç»§æ‰¿çš„ã€‚

å¦‚æžœä½ åªæƒ³æ£€æŸ¥å®žä¾‹å¯¹è±¡çš„æŸä¸ªå±žæ€§æ˜¯å¦å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨`hasOwnProperty()` æ–¹æ³•ã€‚

### 5. Object.hasOwnProperty

åªæƒ³æ£€æŸ¥å®žä¾‹å¯¹è±¡çš„æŸä¸ªå±žæ€§æ˜¯å¦å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨`hasOwnProperty()`æ–¹æ³•ã€‚æ‰€æœ‰ç»§æ‰¿è‡ªObjectçš„javaScriptå¯¹è±¡éƒ½æœ‰è¿™ä¸ªæ–¹æ³•ã€‚

```javascript
const Person = function(name) {
  this.name = name
}
Person.prototype.getName = function() {
  return this.name
}
let enkyoku = new Person('enkyoku')
enkyoku.age = 12

for (prop in enkyoku) {
  if (Object.hasOwnProperty(prop)) {
    console.log('Property name isï¼š' + prop)
  }
}

// åªæ‰“å° Property name isï¼šnameã€‚ è€Œä¸ä¼šæ‰“å°å‡º name å’Œ getName
```

ðŸ› ä½†åœ¨IE8åŠæ—©æœŸIEæµè§ˆå™¨ä¸­ï¼ŒDOMå¯¹è±¡å¹¶éžç»§æ‰¿è‡ªObjectï¼Œæ‰€ä»¥ä¸å«æœ‰è¿™ä¸ªæ–¹æ³•ã€‚

```javascript
//å¯¹äºŽæ‰€æœ‰éžDOMå¯¹è±¡æ¥è¯´ï¼Œæœ€å¥½çš„å†™æ³•
if(object.hasOwnProperty("related")){
    //...
}

//å¯¹äºŽä¸ç¡®å®šæ˜¯å¦ä¸ºDOMå¯¹è±¡ï¼Œåˆ™è¿™æ ·å†™ï¼Œé˜²æ­¢æŠ¥é”™
if("hasOwnProperty" in object && object.hasOwnProperty("related")){
    //...
}
```

## åŽŸç†

### typeof

js åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç ä½Žä½çš„1-3ä½å­˜å‚¨å…¶ç±»åž‹ä¿¡æ¯ðŸ‘‡

| 000 | å¯¹è±¡   | 010 | æµ®ç‚¹æ•° |
| --- | ------ | --- | ------ |
| 100 | å­—ç¬¦ä¸² | 110 | å¸ƒå°”   |
| 1   | æ•´æ•°   |     |        |

ä½† `undefined` å’Œ `null` è¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æœ‰ç‚¹ç‰¹æ®Šï¼š

- `null`ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0

- `undefined`ï¼šç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤º

ðŸ›æ‰€ä»¥ï¼Œ`typeof` åœ¨åˆ¤æ–­ `null` çš„æ—¶å€™ï¼Œç”±äºŽ `null` çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º0ï¼Œå› æ­¤ç›´æŽ¥è¢«å½“åšäº†å¯¹è±¡æ¥çœ‹å¾…ã€‚

ç„¶è€Œç”¨ `instanceof` æ¥åˆ¤æ–­çš„è¯ðŸ‘‰

```javascript
null instanceof null // TypeError: Right-hand side of 'instanceof' is not an object
```

`null` ç›´æŽ¥è¢«åˆ¤æ–­ä¸ºä¸æ˜¯ objectï¼Œè¿™ä¹Ÿæ˜¯ JavaScript çš„åŽ†å²é—ç•™bugï¼Œå¯ä»¥å‚è€ƒ[typeof](https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Ftypeof)ã€‚

å› æ­¤åœ¨ç”¨ `typeof` æ¥åˆ¤æ–­å˜é‡ç±»åž‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæœ€å¥½æ˜¯ç”¨ `typeof` æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»åž‹ï¼ˆåŒ…æ‹¬`symbol`ï¼‰ï¼Œé¿å…å¯¹ null çš„åˆ¤æ–­ã€‚

### instanceof

`instanceof` æ¥åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»åž‹ï¼Œå…¶å®ž `instanceof` ä¸»è¦çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå®žä¾‹æ˜¯å¦å±žäºŽæŸç§ç±»åž‹ã€‚

`instanceof` ä¹Ÿå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå®žä¾‹æ˜¯å¦æ˜¯å…¶çˆ¶ç±»åž‹æˆ–è€…ç¥–å…ˆç±»åž‹çš„å®žä¾‹ã€‚

```javascript
function new_instance_of(leftVaule, rightVaule) {
    let rightProto = rightVaule.prototype; // å–å³è¡¨è¾¾å¼çš„ prototype å€¼
    leftVaule = leftVaule.__proto__; // å–å·¦è¡¨è¾¾å¼çš„__proto__å€¼
    while (true) {
     if (leftVaule === null) {
            return false;
        }
        if (leftVaule === rightProto) {
            return true;
        }
        leftVaule = leftVaule.__proto__
    }
}
```

`instanceof` ä¸»è¦çš„å®žçŽ°åŽŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ `prototype` åœ¨å·¦è¾¹å˜é‡çš„åŽŸåž‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œ`instanceof` åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéåŽ†å·¦è¾¹å˜é‡çš„åŽŸåž‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„ `prototype`ï¼Œå¦‚æžœæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™ä¼šè¿”å›ž falseï¼Œå‘Šè¯‰æˆ‘ä»¬å·¦è¾¹å˜é‡å¹¶éžæ˜¯å³è¾¹å˜é‡çš„å®žä¾‹ã€‚

### å…¶å®ƒ

éžå¸¸ä¸æŽ¨èä½¿ç”¨åŽŸå§‹åŒ…è£…ç±»åž‹ã€‚Stringï¼ŒNumber å’Œ Booleanã€‚

```javascript
const a = "I'm a string primitive";
const b = new String("I'm a String Object");
const c = String("I'm a string primitive")

typeof a; // returns 'string'
typeof b; // returns 'object'
typeof c; // returns 'string'
```

```javascript
const a = "I'm a string primitive";
const b = new String("I'm a String Object");
const c = String("I'm a string primitive")

a instanceof String; // returns false
b instanceof String; // returns true
c instanceof String; // return false
```

```javascript
const isString = (str) => {
  return typeof str === 'string' || str instanceof String
}
```
