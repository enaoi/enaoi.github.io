<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Router | enaoi&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="vue、react、webpack...，everything about front development.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.13931c1a.css" as="style"><link rel="preload" href="/assets/js/app.8a6f8a64.js" as="script"><link rel="preload" href="/assets/js/2.842e7985.js" as="script"><link rel="preload" href="/assets/js/66.265df582.js" as="script"><link rel="prefetch" href="/assets/js/10.cdb683af.js"><link rel="prefetch" href="/assets/js/11.320018ad.js"><link rel="prefetch" href="/assets/js/12.1575a701.js"><link rel="prefetch" href="/assets/js/13.d710e265.js"><link rel="prefetch" href="/assets/js/14.5a9138af.js"><link rel="prefetch" href="/assets/js/15.ad37ab1d.js"><link rel="prefetch" href="/assets/js/16.a7543076.js"><link rel="prefetch" href="/assets/js/17.55938c7a.js"><link rel="prefetch" href="/assets/js/18.b267eae3.js"><link rel="prefetch" href="/assets/js/19.e7ee1e66.js"><link rel="prefetch" href="/assets/js/20.869f7f33.js"><link rel="prefetch" href="/assets/js/21.189e2b24.js"><link rel="prefetch" href="/assets/js/22.4bf5bbb5.js"><link rel="prefetch" href="/assets/js/23.460d48ca.js"><link rel="prefetch" href="/assets/js/24.3bc81cd6.js"><link rel="prefetch" href="/assets/js/25.2b74f289.js"><link rel="prefetch" href="/assets/js/26.ad5a6f1e.js"><link rel="prefetch" href="/assets/js/27.060760e2.js"><link rel="prefetch" href="/assets/js/28.b8e2c39d.js"><link rel="prefetch" href="/assets/js/29.41256001.js"><link rel="prefetch" href="/assets/js/3.446337b8.js"><link rel="prefetch" href="/assets/js/30.f5cd6965.js"><link rel="prefetch" href="/assets/js/31.5febacb9.js"><link rel="prefetch" href="/assets/js/32.ed0a19fa.js"><link rel="prefetch" href="/assets/js/33.67be766e.js"><link rel="prefetch" href="/assets/js/34.2920acfb.js"><link rel="prefetch" href="/assets/js/35.3cb84bf2.js"><link rel="prefetch" href="/assets/js/36.6cf685fd.js"><link rel="prefetch" href="/assets/js/37.ba196ca1.js"><link rel="prefetch" href="/assets/js/38.b3487aa2.js"><link rel="prefetch" href="/assets/js/39.8059deed.js"><link rel="prefetch" href="/assets/js/4.f5601869.js"><link rel="prefetch" href="/assets/js/40.84387762.js"><link rel="prefetch" href="/assets/js/41.e1739030.js"><link rel="prefetch" href="/assets/js/42.ecf48b28.js"><link rel="prefetch" href="/assets/js/43.dc47cb80.js"><link rel="prefetch" href="/assets/js/44.ca1f2934.js"><link rel="prefetch" href="/assets/js/45.ef1585b2.js"><link rel="prefetch" href="/assets/js/46.f4704de7.js"><link rel="prefetch" href="/assets/js/47.a5aa7a82.js"><link rel="prefetch" href="/assets/js/48.2f596373.js"><link rel="prefetch" href="/assets/js/49.2649e461.js"><link rel="prefetch" href="/assets/js/5.e8366d7d.js"><link rel="prefetch" href="/assets/js/50.f6e56838.js"><link rel="prefetch" href="/assets/js/51.443b2b38.js"><link rel="prefetch" href="/assets/js/52.76e8279f.js"><link rel="prefetch" href="/assets/js/53.766085c5.js"><link rel="prefetch" href="/assets/js/54.762d576d.js"><link rel="prefetch" href="/assets/js/55.a0bacbad.js"><link rel="prefetch" href="/assets/js/56.88b21fa9.js"><link rel="prefetch" href="/assets/js/57.edb3c596.js"><link rel="prefetch" href="/assets/js/58.83426543.js"><link rel="prefetch" href="/assets/js/59.e6b35962.js"><link rel="prefetch" href="/assets/js/6.f6480706.js"><link rel="prefetch" href="/assets/js/60.42418b0a.js"><link rel="prefetch" href="/assets/js/61.986a3c55.js"><link rel="prefetch" href="/assets/js/62.dc61b062.js"><link rel="prefetch" href="/assets/js/63.7270a456.js"><link rel="prefetch" href="/assets/js/64.7f8fdce9.js"><link rel="prefetch" href="/assets/js/65.35c2a749.js"><link rel="prefetch" href="/assets/js/67.30c535e8.js"><link rel="prefetch" href="/assets/js/68.eb5cc45e.js"><link rel="prefetch" href="/assets/js/69.38f41b07.js"><link rel="prefetch" href="/assets/js/7.7d7d0d81.js"><link rel="prefetch" href="/assets/js/70.3a9646e8.js"><link rel="prefetch" href="/assets/js/71.fd691e65.js"><link rel="prefetch" href="/assets/js/72.779f8e2d.js"><link rel="prefetch" href="/assets/js/73.b98034f7.js"><link rel="prefetch" href="/assets/js/74.dc317e9a.js"><link rel="prefetch" href="/assets/js/75.2da86225.js"><link rel="prefetch" href="/assets/js/76.12d74630.js"><link rel="prefetch" href="/assets/js/77.0748e04e.js"><link rel="prefetch" href="/assets/js/78.2a0a7e5d.js"><link rel="prefetch" href="/assets/js/79.5d39e898.js"><link rel="prefetch" href="/assets/js/8.b0447022.js"><link rel="prefetch" href="/assets/js/80.02d143a0.js"><link rel="prefetch" href="/assets/js/81.b3890429.js"><link rel="prefetch" href="/assets/js/82.3d1e0f8a.js"><link rel="prefetch" href="/assets/js/83.0c806b49.js"><link rel="prefetch" href="/assets/js/84.b7e2ccc2.js"><link rel="prefetch" href="/assets/js/85.979cbad2.js"><link rel="prefetch" href="/assets/js/86.81e560c6.js"><link rel="prefetch" href="/assets/js/9.68721d1e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.13931c1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">enaoi's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/libs/" class="nav-link">
  库
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/datastructures/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MVVM框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/react/" class="nav-link router-link-active">
  react
</a></li><li class="dropdown-subitem"><a href="/angular/" class="nav-link">
  angular
</a></li></ul></li><li class="dropdown-item"><h4>
          Node
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-subitem"><a href="/express.html" class="nav-link">
  express
</a></li></ul></li><li class="dropdown-item"><h4>
          打包
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/vite/" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/" class="nav-link">
  技术类
</a></li><li class="dropdown-item"><!----> <a href="/reading/" class="nav-link">
  文学类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/vscode/" class="nav-link">
  vscode
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/computer/" class="nav-link">
  计算机
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/enaoi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/libs/" class="nav-link">
  库
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/datastructures/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MVVM框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/react/" class="nav-link router-link-active">
  react
</a></li><li class="dropdown-subitem"><a href="/angular/" class="nav-link">
  angular
</a></li></ul></li><li class="dropdown-item"><h4>
          Node
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-subitem"><a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-subitem"><a href="/express.html" class="nav-link">
  express
</a></li></ul></li><li class="dropdown-item"><h4>
          打包
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/vite/" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/" class="nav-link">
  技术类
</a></li><li class="dropdown-item"><!----> <a href="/reading/" class="nav-link">
  文学类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/vscode/" class="nav-link">
  vscode
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/computer/" class="nav-link">
  计算机
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/enaoi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/react/" aria-current="page" class="sidebar-link">概念</a></li><li><a href="/react/create_react_app.html" class="sidebar-link">Create React App</a></li><li><a href="/react/react_context.html" class="sidebar-link">React 之 Context</a></li><li><a href="/react/react_hook.html" class="sidebar-link">React Hooks</a></li><li><a href="/react/react_hook_getData.html" class="sidebar-link">React Hooks - 请求数据</a></li><li><a href="/react/react_redux.html" class="sidebar-link">React Redux</a></li><li><a href="/react/react_router.html" aria-current="page" class="active sidebar-link">React Router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react_router.html#guides" class="sidebar-link">Guides</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react_router.html#主要组件" class="sidebar-link">主要组件</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#代码分割" class="sidebar-link">代码分割</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#滚动还原" class="sidebar-link">滚动还原</a></li></ul></li><li class="sidebar-sub-header"><a href="/react/react_router.html#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react_router.html#usehistory" class="sidebar-link">useHistory</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#uselocation" class="sidebar-link">useLocation</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#useparams" class="sidebar-link">useParams</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#useroutematch" class="sidebar-link">useRouteMatch</a></li></ul></li><li class="sidebar-sub-header"><a href="/react/react_router.html#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react_router.html#browserrouter" class="sidebar-link">&lt;BrowserRouter&gt;</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#link-、-navlink" class="sidebar-link">&lt;Link&gt;、&lt;NavLink&gt;</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#route" class="sidebar-link">&lt;Route&gt;</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#redirect" class="sidebar-link">&lt;Redirect&gt;</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#switch" class="sidebar-link">&lt;Switch&gt;</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#history" class="sidebar-link">history</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#location" class="sidebar-link">location</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#match" class="sidebar-link">match</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#matchpath" class="sidebar-link">matchPath</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#withrouter" class="sidebar-link">withRouter</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#prompt" class="sidebar-link">&lt;Prompt&gt;</a></li></ul></li><li class="sidebar-sub-header"><a href="/react/react_router.html#url匹配" class="sidebar-link">url匹配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react_router.html#path" class="sidebar-link">path</a></li><li class="sidebar-sub-header"><a href="/react/react_router.html#options" class="sidebar-link">options</a></li></ul></li></ul></li><li><a href="/react/redux_start_with_Dan_Abramov.html" class="sidebar-link">Getting Start With Redux</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-router"><a href="#react-router" class="header-anchor">#</a> React Router</h1> <h2 id="guides"><a href="#guides" class="header-anchor">#</a> Guides</h2> <h3 id="主要组件"><a href="#主要组件" class="header-anchor">#</a> 主要组件</h3> <p><code>react-router</code>主要有三类组件:</p> <ul><li>路由器(routers): <code>&lt;BrowserRouter&gt;</code>、<code>&lt;HashRouter&gt;</code></li> <li>路线匹配（route matchers）:<code>&lt;Route&gt;</code>、<code>&lt;Switch&gt;</code></li> <li>导航（navigation）: <code>&lt;Link&gt;</code>、<code>&lt;NavLink&gt;</code>、<code>&lt;Redirect&gt;</code></li></ul> <h4 id="routers"><a href="#routers" class="header-anchor">#</a> Routers</h4> <p><code>react-router-dom</code> 提供了 <code>&lt;BrowserRouter&gt;</code> 和 <code>&lt;HashRouter&gt;</code> 两种路由器。它们之间的主要差距为：</p> <ul><li><code>&lt;BrowserRouter&gt;</code> 提供一个正常URL路径</li> <li><code>&lt;HashRouter&gt;</code> 将当前位置存储在路径的哈希部分中</li></ul> <h4 id="route-matchers"><a href="#route-matchers" class="header-anchor">#</a> Route Matchers</h4> <p>有两个路由匹配器<code>&lt;Route&gt;</code>、<code>&lt;Switch&gt;</code>。渲染<code>&lt;Switch&gt;</code>时，它将搜索子的<code>&lt;Route&gt;</code>元素匹配当前路径。如果没有任何<code>&lt;Route&gt;</code>匹配到，则渲染<code>null</code>。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p><code>&lt;Route path&gt;</code>匹配的是 URL 的开头，不是完整的路径。所以 <code>&lt;Route path='/'&gt;</code>将始终匹配所有路径。解决方案有两个：</p> <ol><li>将<code>&lt;Route path='/'&gt;</code>放在最后</li> <li>使用<code>&lt;Route path='/' exact&gt;</code>匹配完整URL</li></ol></div> <p>404页面，设置<code>&lt;Route path=&quot;*&quot;&gt;&lt;NotFound/&gt;&lt;/Route&gt;</code> 放置在最后。</p> <h4 id="route-changers"><a href="#route-changers" class="header-anchor">#</a> Route Changers</h4> <p><code>&lt;Link&gt;</code> 组件给你的应用创建一个锚点<code>&lt;a&gt;</code>渲染到HTML中。
<code>&lt;NavLink&gt;</code> 是 <code>&lt;Link&gt;</code> 的特殊类型。和当前地址匹配时，会有<code>class='active'</code>。<strong>注意：同样不是匹配完整路径。</strong></p> <p>需要强制导航时，使用<code>&lt;Redirect&gt;</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/old-match&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">&quot;/will-match&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="代码分割"><a href="#代码分割" class="header-anchor">#</a> 代码分割</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense<span class="token punctuation">,</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./routes/Home'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./routes/About'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="滚动还原"><a href="#滚动还原" class="header-anchor">#</a> 滚动还原</h3> <h4 id="滚到顶部"><a href="#滚到顶部" class="header-anchor">#</a> 滚到顶部</h4> <p>页面内容较长，如果发生了滚动，那么跳转页面后，还会保留之前的滚动位置。</p> <p>实现一个每当路由切换时，都回到顶部的功能。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ScrollToTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pathname<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>当有tab切换的时候，你只希望在页面加载的时候，回到顶部。则实现一个<code>&lt;ScrollToTopOnMount&gt;</code>放在该页面内部。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ScrollToTopOnMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="scrollrrestoration"><a href="#scrollrrestoration" class="header-anchor">#</a> scrollRrestoration</h4> <p>有的时候，从一个滚动列表中点入详情页，回退的时候，想要回到当前的位置。就需要使用恢复滚动。</p> <p>如果只是当前保存，可以直接放入内存中。刷新也需要记录是，将记录保存在 sessionStorage 中持久化缓存。</p> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>React Routes 允许你使用一些钩子函数在你的组件内部来访问router的状态和执行导航。</p> <h3 id="usehistory"><a href="#usehistory" class="header-anchor">#</a> useHistory</h3> <h4 id="properties"><a href="#properties" class="header-anchor">#</a> properties</h4> <ul><li>length: number</li> <li>action: string。[PUSH,POP,REPLACE] 中的一个。</li> <li>location: object。当前location
<ul><li>pathname: string (&quot;/the/path&quot;)</li> <li>hash: string (&quot;#hash&quot;)</li> <li>search: string (&quot;?query&quot;)</li> <li>state</li></ul></li></ul> <h4 id="methods"><a href="#methods" class="header-anchor">#</a> methods</h4> <ul><li>block():防止当前页面发生跳转。</li> <li>createHref(location)</li> <li>go(n)</li> <li>goBack()</li> <li>goForward()</li> <li>push(path,[state])</li> <li>replace(path,[state])</li> <li>listen(listener)</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Block navigation and register a callback that</span>
<span class="token comment">// fires when a navigation attempt is blocked.</span>
<span class="token keyword">let</span> unblock <span class="token operator">=</span> history<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token parameter">tx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Navigation was blocked! Let's show a confirmation dialog</span>
  <span class="token comment">// so the user can decide if they actually want to navigate</span>
  <span class="token comment">// away and discard changes they've made in the current page.</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> tx<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Are you sure you want to go to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Unblock the navigation.</span>
    <span class="token function">unblock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Retry the transition.</span>
    tx<span class="token punctuation">.</span><span class="token function">retry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// To start listening for location changes...</span>
<span class="token keyword">let</span> unlisten <span class="token operator">=</span> history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> action<span class="token punctuation">,</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// The current location changed.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Later, when you are done listening for changes...</span>
<span class="token function">unlisten</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>history.block</code>只对使用<code>history.push</code>接口的页面内跳转有效。而类似于浏览器的刷新操作，必须使用<code>beforeunload</code> 事件处理。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 取消事件</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// chrome 浏览器要求设置 returnValue</span>
  e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>注册的 <code>beforeunload</code> 事件存在一个微妙的副作用。即页面会在 <code>pagehide</code> 事件中不在可利用。页面可能不再能被浏览器复用，比如 timers、scroll position等，当用户回到当前页面时，都不可复用。</p></div> <h3 id="uselocation"><a href="#uselocation" class="header-anchor">#</a> useLocation</h3> <p><code>location === history.location</code></p> <h3 id="useparams"><a href="#useparams" class="header-anchor">#</a> useParams</h3> <p>对于 <code>&lt;Route path=&quot;/blog/:slug&quot;&gt;&lt;/Route&gt;</code> 的匹配项。 <code>const {slug} = useParams()</code></p> <h3 id="useroutematch"><a href="#useroutematch" class="header-anchor">#</a> useRouteMatch</h3> <p><code>useRouteMatch</code> hook 使得组件不用渲染<code>&lt;Route&gt;</code>来获取match 当前路由的数据。</p> <ul><li><p>简单的调用： <code>let match = useRouteMatch(&quot;/blog/:slug&quot;)</code></p></li> <li><p>复杂调用，和<code>&lt;Route/&gt;</code> 接受的匹配参数相同：</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">useRouteMatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/blog/:slug/&quot;</span><span class="token punctuation">,</span>
  strict<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  sensitive<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>返回的 match 如下：</p> <ul><li>isExact: boolean</li> <li>params: object</li> <li>path: string。<code>/blog/:slug</code></li> <li>url: string。<code>/blog/detail</code></li></ul> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <h3 id="browserrouter"><a href="#browserrouter" class="header-anchor">#</a> <code>&lt;BrowserRouter&gt;</code></h3> <p><code>&lt;Router&gt;</code> 使用HTML5的 history API(pushState,replaceState,popstate事件)来薄脆UI和URL的同步。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>BrowserRouter
      basename<span class="token operator">=</span><span class="token string">&quot;/basic&quot;</span>
      getUserConfirmation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
      forceRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
      keyLength<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">}</span>
      children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">/** */</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>basename: string。所有路由的base url。当你的app是server的目录中，就需要使用这个属性</li> <li>getUserConfirmation: func(message,callback)。用了一下，不好用。message拿到的是<code>&lt;Promt/&gt;</code>组件的message属性。</li> <li>forceRefresh: boolean。路由切换时，强制刷新全页面。</li> <li>keylength: number。<code>location.key</code> 的默认长度是6</li> <li>children: node。需要显然的子元素。</li></ul> <h3 id="link-、-navlink"><a href="#link-、-navlink" class="header-anchor">#</a> <code>&lt;Link&gt;</code>、<code>&lt;NavLink&gt;</code></h3> <ul><li>to
<ul><li>string</li> <li>object
<ul><li>pathname</li> <li>search</li> <li>hash</li> <li>state</li></ul></li> <li>function: func(location =&gt; string/object)</li></ul></li> <li>replace: boolean。为真时，点击Link链接，history栈中替换当前实例。</li> <li>innerRef: func(node =&gt; {}) / RefObject。当前组件的DOM引用。同 <code>React.createRef</code>。</li> <li>component: React.Component 可以用来自定义 link 的DOM结构</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> FancyLink <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">&quot;custom&quot;</span> href<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>href<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">'&gt;&gt;&gt;'</span> <span class="token operator">+</span> props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>&lt;NavLink&gt;</code> 是 <code>&lt;Link&gt;</code>的特殊版本。当匹配到当前路径时，会增加一个样式属性。</p> <ul><li><p>activeClassName: string</p></li> <li><p>activeStyle: object</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>NavLink
  to<span class="token operator">=</span><span class="token string">&quot;/faq&quot;</span>
  activeStyle<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    fontWeight<span class="token operator">:</span> <span class="token string">&quot;bold&quot;</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  FAQs
<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>exact: bool</p></li> <li><p>strict: bool</p></li> <li><p>isActive: func(match,location):boolean。判断当前link是否是active的判断逻辑</p></li> <li><p>location: object。isActive中的location参数一般默认是当前location.如果需要对比其它地址，location参数就是必须的。</p></li></ul> <h3 id="route"><a href="#route" class="header-anchor">#</a> <code>&lt;Route&gt;</code></h3> <h4 id="渲染方法"><a href="#渲染方法" class="header-anchor">#</a> 渲染方法</h4> <p>三个渲染方法，都会传递以下三个相同的props：</p> <ul><li>match</li> <li>history</li> <li>location</li></ul> <h5 id="route-component"><a href="#route-component" class="header-anchor">#</a> <code>&lt;Route component&gt;</code></h5> <p>只有路由匹配时，才渲染组件。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>路由使用 <code>React.createElement</code> 来渲染传入的 component 参数。这意味着，如果你使用的是一个 inline function，导致每次渲染的时候回都会创建一个新的组件！如果在需要使用inline function的场合，请使用后面的 render 或者 children prop</p></div> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/:username&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello <span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="route-render"><a href="#route-render" class="header-anchor">#</a> <code>&lt;Route render&gt;</code></h5> <p>routeProps (match,location,history)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">routeProps</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>routeProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p><code>&lt;Route component&gt;</code> 优先级高于 <code>&lt;Route render&gt;</code>，所以不要在同一个<code>&lt;Route&gt;</code>中同时使用两个方法</p></div> <h5 id="route-children"><a href="#route-children" class="header-anchor">#</a> <code>&lt;Route children&gt;</code></h5> <p>有时候，无论路径是否匹配，你都需要渲染改组件，此时可以使用children参数。
它和render完全一致，除了无论路径是否匹配<code>path</code>参数，都会被调用之外。当路由不匹配时，<code>match</code>属性为null。</p> <p>这使得你可以通过当前路径是否匹配来动态的适配你的UI组件。当路由匹配时，添加样式。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/page/1&quot;</span> children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>match <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>这个是一个Route render Component<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也适合用于动画</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token comment">/* Animate will always render, so you can use lifecycles
        to animate its child in and out */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Animate<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>match <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Something <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Animate<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p><code>&lt;Route children&gt;</code> 优先级高于 <code>&lt;Route render&gt;</code>和<code>&lt;Route component&gt;</code> ，所以不要在同一个<code>&lt;Route&gt;</code>中同时任何两个方法</p></div> <h4 id="other"><a href="#other" class="header-anchor">#</a> other</h4> <ul><li>path: string|string[]。<code>&lt;Route&gt;</code>不提供path参数，则匹配所有路径。</li> <li>exact: bool。为真时，只会精确匹配 <code>location.pathname</code>，否则为父级时，也匹配。</li> <li>strict: bool。<code>/one/</code>只匹配路径中以<code>/one/</code>开头的路径（如<code>/one/</code>或<code>/one/two</code>）。<code>/one</code>则不匹配。</li> <li>location: object。一般路径默认匹配的是 当前location，如果是需要匹配其它路径，则需要传入location参数。</li> <li>sensitive: bool。大小写是否敏感。</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>strict参数可以用来强制<code>location.pathname</code>不带斜杠，但必须配合exact一起使用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route exact strict path<span class="token operator">=</span><span class="token string">&quot;/one&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>About <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面的路径只匹配<code>/one</code></p></div> <h3 id="redirect"><a href="#redirect" class="header-anchor">#</a> <code>&lt;Redirect&gt;</code></h3> <ul><li>to: string/object</li> <li>push: 为true时，redirect将会采用push策略而不是replace</li> <li>from: 匹配到的路由。</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>只能用在<code>&lt;Switch&gt;</code>内部匹配某个地址渲染<code>&lt;Redirect&gt;</code>时使用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Redirect <span class="token keyword">from</span><span class="token operator">=</span><span class="token string">'/old-path'</span> to<span class="token operator">=</span><span class="token string">'/new-path'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/new-path'</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Place <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>

<span class="token comment">// Redirect with matched parameters</span>
<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Redirect <span class="token keyword">from</span><span class="token operator">=</span><span class="token string">'/users/:id'</span> to<span class="token operator">=</span><span class="token string">'/users/profile/:id'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/users/profile/:id'</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Profile <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div> <ul><li>exact: bool。只可以用在包含<code>from</code>参数的情况下，用于<code>from</code>匹配当前<code>location</code></li> <li>strict: bool。同上</li> <li>sensitive: bool。同上</li></ul> <h3 id="switch"><a href="#switch" class="header-anchor">#</a> <code>&lt;Switch&gt;</code></h3> <p>渲染第一个匹配到location的<code>&lt;Route&gt;</code>或<code>&lt;Redirect&gt;</code></p> <h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <h3 id="location"><a href="#location" class="header-anchor">#</a> location</h3> <h3 id="match"><a href="#match" class="header-anchor">#</a> match</h3> <ul><li>isExact:boolean</li> <li>params: object</li> <li>path: string。正常情况下和url相同，当时动态url是，但会的是动态url。<code>&quot;/users/:id&quot;</code>。用于构造嵌套的<code>&lt;Route&gt;</code></li> <li>url: string。真是url。用于构造嵌套的link</li></ul> <h3 id="matchpath"><a href="#matchpath" class="header-anchor">#</a> matchPath</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> matchPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">matchPath</span><span class="token punctuation">(</span><span class="token string">&quot;/users/123&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/users/:id&quot;</span><span class="token punctuation">,</span>
  exact<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  strict<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 匹配时返回对象，不匹配时返回null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="withrouter"><a href="#withrouter" class="header-anchor">#</a> withRouter</h3> <h3 id="prompt"><a href="#prompt" class="header-anchor">#</a> <code>&lt;Prompt&gt;</code></h3> <h2 id="url匹配"><a href="#url匹配" class="header-anchor">#</a> url匹配</h2> <p>react-router 采用 <a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">Path-to-RegExp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来匹配url。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> pathToRegexp <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path-to-regexp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// pathToRegexp(path, keys?, options?)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="path"><a href="#path" class="header-anchor">#</a> path</h3> <p>string、array of string、regular expression</p> <h3 id="options"><a href="#options" class="header-anchor">#</a> options</h3> <table><thead><tr><th style="text-align:left;">参数</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td style="text-align:left;">sensitive</td> <td>false</td> <td>true: 大小写敏感</td></tr> <tr><td style="text-align:left;">strict</td> <td>false</td> <td>true: 不允许匹配尾随分隔符</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">7/13/2020, 6:36:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react/react_redux.html" class="prev">
        React Redux
      </a></span> <span class="next"><a href="/react/redux_start_with_Dan_Abramov.html">
        Getting Start With Redux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8a6f8a64.js" defer></script><script src="/assets/js/2.842e7985.js" defer></script><script src="/assets/js/66.265df582.js" defer></script>
  </body>
</html>
